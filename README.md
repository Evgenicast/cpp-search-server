# cpp-search-server
Финальный проект: поисковый сервер

# Требования

C++17 и выше

# Описание
Программа реализована с использыванием многопоточности и поиска слов в документах методом TF/IDF, имеет вполне рабочий функционал и может быть интегрирована в другие проекты, где нужен движок для поиска.

**Некоторые особенности данного поисковика:**

- *Возвращаются топ 5 документов по релевантности - глобальная константа MAX_RESULT_DOCUMENT_COUNT = 5*
- *Учитываются стоп-слова - подобные слова не учитываются в запросе.*
- *Учитываются минус-слова - документы, включающие такие слова, будут исключены из результата:*
- *Если в запросе нет плюс-слов, ничего найтись не должно.*
- *Если одно и то же слово будет в запросе и с минусом, и без, считается, что оно есть только с минусом.*
- *Учёт рейтинга документа (опционально) - по функции-предикат.*
- *Учёт статуса документа (опционально) - по функции-предикат.*
- *Ранжирование по TF-IDF:*
- *Полезность слов оценивают понятием inverse document frequency или IDF. Эта величина — свойство слова, а не документа. Чем в большем количестве документов есть слово, тем ниже IDF.*
- *Второй способ улучшить ранжирование — выше располагать документы, где искомое слово встречается более одного раза. Здесь нужно рассчитать term frequency или TF. Для конкретного слова и конкретного документа это доля,*  
  *которую данное слово занимает среди всех.*
- *При одинаковой релевантности с точностью до 10^-6, сортировка документа происходит по убыванию рейтинга.*
 
**Расчёт релевантности:**

вычисляется IDF каждого слова в запросе, вычисляется TF каждого слова запроса в документе, IDF каждого слова запроса умножается на TF этого слова в этом документе,
все произведения IDF и TF в документе суммируются. Реализован механизм исключений. Реализован Paginator - поисковая система разбивает результаты на страницы.
Разработана функция поиска и удаления дубликатов - документов, у которых наборы встречающихся слов совпадают; стоп-слова игнорируются.
Удаляются документы с бóльшим id.

**Реализована многопоточная версия поиска документа в дополнении к однопоточной.**
**Исключено состояние гонки.**

# Инструкция
Перед использованием измените main под ваши данные.


1. На вход элемента класса SearchServer через конструктор подаются стоп-слова;
2. Через метод AddDocument этого класса добавляются id, текст документа, его статус (опционально), его рейтинг (опционально);
3. Методом FindTopDocuments этого класса производится поиск документа по запросу;
4. На вход подаются: политика параллельного выполнения(опционально), запрос, статус документа (опционально), функция предикат (опционально);

Вывод документа через функцию вывода.

![Вывод документа через функцию вывода](https://github.com/Evgenicast/cpp-transport-catalogue/assets/107400788/912ea96d-e514-456d-9189-8b046fc47388)

````
Вывод:
ACTUAL by default:
{ document_id = 2, relevance = 0.866434, rating = 1 }
{ document_id = 4, relevance = 0.231049, rating = 1 }
{ document_id = 1, relevance = 0.173287, rating = 1 }
{ document_id = 3, relevance = 0.173287, rating = 1 }
BANNED:
Even ids:
{ document_id = 2, relevance = 0.866434, rating = 1 }
{ document_id = 4, relevance = 0.231049, rating = 1 }
````
